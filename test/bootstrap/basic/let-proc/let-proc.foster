main = {
  call_deref_a !;
  call_deref_b !;
};

// Test that global symbols may be let-bound and stored in refs.

g = { x : Int32 => { x } };

call_deref_a = {
  r = (ref g);
  gg = r^;

  expect_i32 3;
  print_i32 ((gg 3) !);
};

f = { x : Int32 => x };

call_deref_b = {
  r = (ref f);
  gg = r^;

  expect_i32 3;
  print_i32 (gg 3);
};

