main = {
  simpler();
  capture();
};

simpler = {
  let r = (ref 0); in
    expect_i32 0;
     print_i32 r^;
    3 >^ r;
    expect_i32 3;
     print_i32 r^;
   end
};

capture = {
  let r = (ref 0);
      f = { r^ };
   in
     2 >^ r;
     expect_i32 2;
      print_i32 (f ());
  end
};
