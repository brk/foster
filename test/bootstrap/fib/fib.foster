// http://www.research.att.com/~njas/sequences/table?a=45&fmt=4
main = {
  expect_i32 55;
  print_i32 (fib-naive (opaquely_i32 10));

  expect_i32 610;
  print_i32 (fib-naive (opaquely_i32 15));

  expect_i32 6765;
  print_i32 (fib-tailrecursive (opaquely_i32 20) 0 1);
};

fib-naive = { x : i32 =>
  if primitive_<_i32 x 3
    then 1
    else primitive_+_i32 (fib-naive (primitive_-_i32 x 1))
                         (fib-naive (primitive_-_i32 x 2))
  end
};

fib-tailrecursive = { x : i32 =>
                current : i32 =>
                   next : i32 =>
  if primitive_==_i32 x 0
    then current
    else fib-tailrecursive (primitive_-_i32 x 1)
                            next
                           (primitive_+_i32 current next)
  end
};

